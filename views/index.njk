{% extends "layout.njk" %}

{% block extra_header %}
    <script src="/static/self/js/propaganda.js"></script>
    <script src="/static/self/js/request_utils.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const searchInput = document.getElementById("search-input");
            const searchBtn = document.getElementById("search-btn");
            searchInput.addEventListener("keydown", function (e) {
                if (e.key === "Enter") {
                    e.preventDefault();
                    searchBtn.click();
                }
            });
            const urlInput = document.getElementById("url");
            const viewBtn = document.getElementById("view-btn");
            urlInput.addEventListener("keydown", function (e) {
                if (e.key === "Enter") {
                    e.preventDefault();
                    viewBtn.click();
                }
            });
        });
    </script>
{% endblock %}

{% block content %}
    <div class="ui grid">
        <div class="sixteen wide column">
            <div class="card shadow" style="background: linear-gradient(135deg, #e0e8ff 0%, #d6e3ff 100%);">
                <h1 class="ui center aligned header" style="font-size: 2.5em; color: #667eea;"><i class="ui icon bookmark"></i> 洛谷保存站</h1>
                <p style="color: gray; font-size: 1.2em; text-align: center;">
                    可靠的洛谷专栏和剪贴板保存平台<br />
                </p>
            </div>
        </div>
    </div>
    <div class="ui grid" style="margin-top: -20px;">
        <div class="{% if isMobile %}sixteen wide{% else %}eleven wide{% endif %} column">
            <div class="card shadow">
                <h3 class="ui header">
                    <i class="ui icon bullhorn colored"></i> 公告
                </h3>
                <div>
                    欢迎使用洛谷保存站！如遇问题请及时反馈。
                </div>
            </div>
            <div class="card outline shadow">
                <h3 class="ui header">
                    <i class="ui icon search colored"></i> 搜索专栏
                </h3>
                <div class="ui icon fluid input">
                    <input type="text" id="search-input" placeholder="标题 / 内容 / 作者 UID">
                    <i class="inverted circular search link icon" id="search-btn"></i>
                </div>
            </div>
            <div class="card outline shadow">
                <h3 class="ui header">
                    <i class="ui icon newspaper colored"></i> 专栏 / 剪贴板保存
                </h3>
                <div class="ui fluid left icon input">
                    <i class="ui icon linkify"></i>
                    <input type="text" id="url" placeholder="请输入洛谷专栏或剪贴板链接">
                    <button class="ui teal button" id="save-btn" style="margin-left: 10px;">保存</button>
                    <button class="ui blue button" id="view-btn">查看</button>
                </div>
            </div>
        </div>
        <div class="{% if isMobile %}sixteen wide{% else %}five wide{% endif %} column">
            <div class="ui {% if isMobile %}two column grid{% endif %}">
                <div class="{% if isMobile %}column{% else %}row{% endif %}">
                    <div class="card outline shadow" style="text-align: center;">
                        <i class="ui icon newspaper colored" style="font-size: 3rem;"></i>
                        <div style="font-size: 2.5rem; font-weight: 550; margin-top: 8px;">{{ article_count }}</div>
                        <div style="font-size: 1.2rem; margin-top: 12px;">专栏文章</div>
                    </div>
                </div>
                <div class="{% if isMobile %}column{% else %}row{% endif %}">
                    <div class="card outline shadow" style="text-align: center;">
                        <i class="ui icon paste colored" style="font-size: 3rem;"></i>
                        <div style="font-size: 2.5rem; font-weight: 550; margin-top: 8px;">{{ paste_count }}</div>
                        <div style="font-size: 1.2rem; margin-top: 12px;">剪贴板</div>
                    </div>
                </div>
            </div>
            <div class="card propaganda shadow" id="propaganda">
                <button class="ad-nav-control prev"><i class="fas fa-chevron-left"></i></button>
                <button class="ad-nav-control next"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </div>
{% endblock %}