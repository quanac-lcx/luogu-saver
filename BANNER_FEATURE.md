# Banner åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

ä¸ºæ´›è°·ä¿å­˜ç«™æ·»åŠ äº† Banner æ¨ªå¹…åŠŸèƒ½ï¼Œå¯åœ¨é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºå¤šæ¡é€šçŸ¥æ¨ªå¹…ï¼Œæ”¯æŒåå°ç®¡ç†ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… æ”¯æŒå¤šæ¡ Bannerï¼Œå‚ç›´æ’åˆ—æ˜¾ç¤º
- âœ… æ¯ä¸ª Banner å¯é…ç½®ç‹¬ç«‹çš„èƒŒæ™¯é¢œè‰²
- âœ… æ”¯æŒ HTML å†…å®¹
- âœ… åœ†è§’è®¾è®¡ï¼Œç¾è§‚å¤§æ–¹
- âœ… å¯é€šè¿‡ç‚¹å‡» Ã— æŒ‰é’®å…³é—­
- âœ… å…³é—­çŠ¶æ€ä¿å­˜åˆ° localStorageï¼Œåˆ·æ–°åä¸å†æ˜¾ç¤º
- âœ… å¹³æ»‘çš„å±•å¼€å’Œæ”¶èµ·åŠ¨ç”»
- âœ… åå°å®Œæ•´çš„ CRUD ç®¡ç†åŠŸèƒ½
- âœ… å®æ—¶é¢„è§ˆæ•ˆæœ

## é…ç½®è¯´æ˜

### settings.json ç»“æ„

```json
{
  "announcement": {
    "content": "æ¬¢è¿ä½¿ç”¨æ´›è°·ä¿å­˜ç«™ï¼å¦‚é‡é—®é¢˜è¯·åŠæ—¶åé¦ˆã€‚",
    "enabled": true
  },
  "banners": [
    {
      "content": "ğŸ‰ æ¬¢è¿æ¥åˆ°æ´›è°·ä¿å­˜ç«™ï¼",
      "color": "#667eea",
      "enabled": true
    },
    {
      "content": "ğŸ“¢ ç³»ç»Ÿç»´æŠ¤é€šçŸ¥ï¼šæœ¬å‘¨æœ«å°†è¿›è¡Œç³»ç»Ÿå‡çº§ç»´æŠ¤",
      "color": "#f59e0b",
      "enabled": true
    }
  ]
}
```

### Banner é…ç½®å­—æ®µ

- `content` (string): Banner çš„å†…å®¹ï¼Œæ”¯æŒ HTML
- `color` (string): èƒŒæ™¯é¢œè‰²ï¼Œä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼Œå¦‚ `#667eea`
- `enabled` (boolean): æ˜¯å¦å¯ç”¨è¯¥ Banner

## ä½¿ç”¨æ–¹æ³•

### åå°ç®¡ç†

1. è®¿é—® `/admin/banners` è¿›å…¥ Banner ç®¡ç†é¡µé¢
2. ç‚¹å‡»"æ·»åŠ  Banner"æŒ‰é’®åˆ›å»ºæ–°çš„ Banner
3. ç¼–è¾‘ Banner å†…å®¹ã€è®¾ç½®èƒŒæ™¯é¢œè‰²
4. å‹¾é€‰"å¯ç”¨æ­¤ Banner"å¯ç”¨è¯¥æ¨ªå¹…
5. æŸ¥çœ‹é¢„è§ˆæ•ˆæœ
6. ç‚¹å‡»"ä¿å­˜æ‰€æœ‰æ›´æ”¹"ä¿å­˜

### åˆ é™¤ Banner

åœ¨ Banner ç¼–è¾‘åŒºåŸŸå³ä¸Šè§’ç‚¹å‡»çº¢è‰²åƒåœ¾æ¡¶å›¾æ ‡å³å¯åˆ é™¤ã€‚

### å‰å°æ˜¾ç¤º

- å¯ç”¨çš„ Banner ä¼šè‡ªåŠ¨æ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨
- ç”¨æˆ·å¯ä»¥ç‚¹å‡» Ã— æŒ‰é’®å…³é—­ä¸æƒ³çœ‹åˆ°çš„ Banner
- å…³é—­çŠ¶æ€ä¼šä¿å­˜ï¼Œåˆ·æ–°é¡µé¢åä¸ä¼šå†æ¬¡æ˜¾ç¤º

## æŠ€æœ¯å®ç°

### æ–°å¢æ–‡ä»¶

- `middleware/banners.js`: Banner ä¸­é—´ä»¶ï¼Œè‡ªåŠ¨åŠ è½½ banners åˆ°æ‰€æœ‰é¡µé¢
- `views/admin/banners.njk`: Banner ç®¡ç†é¡µé¢æ¨¡æ¿

### ä¿®æ”¹æ–‡ä»¶

- `app.js`: æ·»åŠ  banners ä¸­é—´ä»¶
- `routes/admin.route.js`: æ·»åŠ  Banner ç®¡ç†è·¯ç”±
- `services/admin.service.js`: æ·»åŠ  Banner CRUD æœåŠ¡å‡½æ•°
- `services/settings.service.js`: æ·»åŠ è·å– banners å‡½æ•°
- `views/layout.njk`: æ·»åŠ  Banner æ˜¾ç¤ºåŒºåŸŸå’Œæ ·å¼
- `views/admin/dashboard.njk`: æ·»åŠ  Banner ç®¡ç†å…¥å£
- `settings.example.json`: æ·»åŠ  banners é…ç½®ç¤ºä¾‹

### API ç«¯ç‚¹

- `GET /admin/banners`: è®¿é—® Banner ç®¡ç†é¡µé¢
- `POST /admin/api/banners`: æ›´æ–° Banner é…ç½®

## æ³¨æ„äº‹é¡¹

1. Banner å†…å®¹æ”¯æŒ HTMLï¼Œè¯·æ³¨æ„é˜²æ­¢ XSS æ”»å‡»
2. é¢œè‰²å€¼éœ€ä½¿ç”¨åå…­è¿›åˆ¶æ ¼å¼ï¼Œå¦‚ `#667eea`
3. å…³é—­çš„ Banner ä¿¡æ¯å­˜å‚¨åœ¨æµè§ˆå™¨ localStorage ä¸­
4. åªæœ‰å¯ç”¨çš„ Banner æ‰ä¼šåœ¨å‰å°æ˜¾ç¤º
5. Banner é…ç½®å­˜å‚¨åœ¨ settings.json ä¸­ï¼Œéœ€è¦æœ‰æ–‡ä»¶å†™å…¥æƒé™
